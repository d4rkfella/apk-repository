package:
  name: qbittorrent
  version: 5.1.2
  epoch: 0
  description: The qbittorrent-nox-static project is a bash build script that compiles a static qbittorrent-nox binary using the latest available dependencies from their source.
  copyright:
    - license: Apache-2.0

environment:
  contents:
    packages:
      - wolfi-baselayout
      - build-base
      - qt6-qtbase-dev
      - openssl-dev
      - zlib-dev
      - boost-dev
      - boost-tools

pipeline:
  - uses: git-checkout
    with:
      destination: /home/build/qbittorrent
      repository: https://github.com/qbittorrent/qBittorrent
      tag: release-${{package.version}}
      expected-commit: 202ff8a099cfc1ca9421e7d30944b3c58a4a47cd
  
  - uses: git-checkout
    with:
      destination: /home/build/libtorrent
      repository: https://github.com/arvidn/libtorrent
      tag: v2.0.11
      expected-commit: 9d7443f467147d1784fb7516d2a882db1abb5a8b
      
  - working-directory: /home/build/libtorrent
    runs: |
      echo "using gcc ;" >>~/user-config.jam
      b2 crypto=openssl cxxstd=14 release


update:
  enabled: true
  github:
    identifier: qbittorrent/qBittorrent
    strip-prefix: "release-"
