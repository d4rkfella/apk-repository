package:
  name: qbittorrent
  version: 5.0.4_v2.0.11
  epoch: 0
  description: Statically Linked qBittorrent
environment:
  contents:
    repositories:
      - https://dl-cdn.alpinelinux.org/alpine/edge/main
      - https://dl-cdn.alpinelinux.org/alpine/edge/community
    packages:
      - alpine-base
      - build-base
      - ca-certificates-bundle
      - bash
      - git
      - autoconf
      - automake
      - cmake
      - curl
      - graphviz
      - libtool
      - linux-headers
      - perl
      - pkgconf
      - python3-dev
      - py3-numpy-dev
      - re2c
      - ttf-freefont
      - sudo
pipeline:
  - uses: fetch
    with:
      uri: https://github.com/userdocs/qbittorrent-nox-static/archive/refs/tags/release-5.0.4_v2.0.11.tar.gz
      expected-sha256: 583cc7f58e8da72fc3192df3f53e2717513b2f2a0fe4c9a0b8b5c28956de14ab
  - runs: |
      printf '%s\n' "qbt_build_dir="qbt-build" > env.custom
      printf '%s\n' qbt_libtorrent_version="2.0" >> env.custom
      printf '%s\n' qbt_qt_version="6" >> env.custom
      printf '%s\n' qbt_build_tool="cmake" >> env.custom
      printf '%s\n' qbt_cross_name="default" >> env.custom
      printf '%s\n' qbt_patches_url="userdocs/qbittorrent-nox-static" >> env.custom
      printf '%s\n' qbt_skip_icu="yes" >> env.custom
      printf '%s\n' qbt_boost_tag="boost-1.87.0" >> env.custom
      printf '%s\n' qbt_libtorrent_tag="v2.0.11" >> env.custom
      printf '%s\n' qbt_qt_tag="v6.8.2" >> env.custom
      printf '%s\n' qbt_qbittorrent_tag="release-5.0.4" >> env.custom
      printf '%s\n' qbt_libtorrent_master_jamfile="no" >> env.custom
      printf '%s\n' qbt_workflow_files="no" >> env.custom
      printf '%s\n' qbt_workflow_artifacts="no" >> env.custom
      printf '%s\n' qbt_cache_dir="" >> env.custom
      printf '%s\n' qbt_optimise_strip="yes" >> env.custom
      printf '%s\n' qbt_build_debug="no" >> env.custom
      printf '%s\n' qbt_standard="20" >> env.custom
      printf '%s\n' qbt_static_ish="no" >> env.custom
      printf '%s\n' qbt_optimise="no" >> env.custom
  - runs: |
      export $(cat env.custom) && /usr/bin/env bash ./qbt-nox-static.bash
